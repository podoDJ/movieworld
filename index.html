<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
          <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    
    <title>Document</title>
    <style>
      .custom-shape-divider-top-1683554538 {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        overflow: hidden;
        line-height: 0;
        transform: rotate(180deg);
      }

      .custom-shape-divider-top-1683554538 svg {
        position: relative;
        display: block;
        width: calc(157% + 1.3px);
        height: 110px;
      }

      .custom-shape-divider-top-1683554538 .shape-fill {
        fill: #ffffff;
      }

      body {
        margin: 0;
        background: rgb(238, 174, 202);
        background: radial-gradient(
          circle,
          rgba(238, 174, 202, 1) 0%,
          rgba(148, 187, 233, 1) 100%
        );
      }

      .box1 {
        width: 600px;
        height: 300px;
        background-color: rgba(240, 248, 255, 0.441);
        margin: 300px auto;
        border-radius: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      /*동준 글쓰기 style 추가*/
      .mypost{
        width: 100%;
        margin-top : 20px; 
      }
      .mybtn {
        margin-top: 20px;
        display: flex;
        justify-content: center;
      }

      .box2Container {
        width: 80%;
        height: 1200px;
        margin: 0 auto;
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
      }

      .box2 {
        width: 300px;
        height: 500px;
        margin: 0px 20px;
        background-color: rgba(255, 255, 255, 0.586);

        margin: 50px auto;
        border-radius: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        overflow: scroll;
      }

      .imageBox {
        width: 280px;
        height: 280px;
        position: absolute;
        margin: 15px;
        background-image: url();
        background-position: center;
        background-size: cover;
        background-color: rgba(255, 255, 255, 0.586);
        border-radius: 10px;
      }


      .img {
        width: 260px;
        height: 260px;
      } 
      .list {
        list-style: none;
        position: absolute;
        top: 300px;
        padding: 10px;
      }

      .list li {
        border: 1px solid white;
        display: inline-block;
        padding: 5px;
        border-radius: 6px;
        margin: 10px 0;
        padding-left: 0px;
      }

    </style>

    <script>
        $(document).ready(function(){
          listing();
        });

        function listing() {
            fetch('/movie').then((res) => res.json()).then((data) => {
                let rows = data['result']
                rows.forEach((a)=>{
                    let comment = a['comment']
                    let title = a['title']
                    let desc = a['desc']
                    let image = a['image']

                    let temp_html = `<div class="box2">
                                        <div class="imageBox" style="background-image: url(${image});"></div>
                                        <div class="img"></div>                                       
                                        <ul class="list">
                                        <li class="ListBox">타이틀 : ${title}</li>
                                        <li class="ListBox">코멘트 : ${comment}</li>
                                        <li class="ListBox">줄거리 : ${desc}</li>
                                        <li class="ListBox">
                                            댓글이 들어갑니다.
                                        </li>
                                        <li class="ListBox">
                                            댓글이 들어갑니다.
                                        </li>
                                        </ul>
                                    </div>`
                    $('#cards-box').append(temp_html)      //prepend : 가장 나중에 붙여진 아이가 맨 첫번째에 들어감.
                })
            })
        }

        function posting() {
            let url =$('#url').val()
            let comment =$('#comment').val()

			let formData = new FormData();
            formData.append("url_give", url);
            formData.append("comment_give", comment);

            fetch('/movie', {method : "POST",body : formData}).then((res) => res.json()).then((data) => {
                alert(data['msg'])
                //새로고침
                window.location.reload()
            })
        }
    </script>

  </head>

  <body>
    <div class="custom-shape-divider-top-1683554538">
      <svg
        data-name="Layer 1"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 1200 120"
        preserveAspectRatio="none"
      >
        <path
          d="M985.66,92.83C906.67,72,823.78,31,743.84,14.19c-82.26-17.34-168.06-16.33-250.45.39-57.84,11.73-114,31.07-172,41.86A600.21,600.21,0,0,1,0,27.35V120H1200V95.8C1132.19,118.92,1055.71,111.31,985.66,92.83Z"
          class="shape-fill"
        ></path>
      </svg>
    </div>
    <div>
    <!-- 영화추천 포스팅 -->
      <div class="box1">
        <div class="mypost" id="post-box">
            <div class="form-floating mb-3">
                <input id="url" type="email" class="form-control">
                <label>영화URL</label>
            </div>
            <div class="form-floating">
                <textarea id="comment" class="form-control"></textarea>
                <label for="floatingTextarea2">코멘트</label>
            </div>
            
            <div class="mybtn">
                <button onclick="posting()" type="button" class="btn btn-dark">기록하기</button>   
            </div>
        </div>
        </div>
    <!-- 영화추천 리스팅 -->
    <div class="box2Container" id="cards-box">
        <div class="box2">
            <div class="imageBox" style="background-image: url(${image});"></div>
            <div class="img"></div>
            <ul class="list">
            <li class="ListBox">타이틀 : </li>
            <li class="ListBox">코멘트 : </li>
            <li class="ListBox">desc : </li>
            <li class="ListBox">
                댓글이 들어갑니다.
            </li>
            <li class="ListBox">
                댓글이 들어갑니다.
            </li>
            </ul>
        </div>
        <div class="box2">
            <div class="imageBox" style="background-image: url(${image});"></div>
            <div class="img"></div>
            <ul class="list">
            <li class="ListBox">타이틀 : </li>
            <li class="ListBox">코멘트 : </li>
            <li class="ListBox">desc : </li>
            <li class="ListBox">
                댓글이 들어갑니다.
            </li>
            <li class="ListBox">
                댓글이 들어갑니다.
            </li>
            </ul>
        </div>
        <div class="box2">
            <div class="imageBox" style="background-image: url(${image});"></div>
            <div class="img"></div>
            <ul class="list">
            <li class="ListBox">타이틀 : </li>
            <li class="ListBox">코멘트 : </li>
            <li class="ListBox">desc : </li>
            <li class="ListBox">
                댓글이 들어갑니다.
            </li>
            <li class="ListBox">
                댓글이 들어갑니다.
            </li>
            </ul>
        </div>
        <div class="box2">
            <div class="imageBox" style="background-image: url(${image});"></div>
            <div class="img"></div>
            <ul class="list">
            <li class="ListBox">타이틀 : </li>
            <li class="ListBox">코멘트 : </li>
            <li class="ListBox">desc : </li>
            <li class="ListBox">
                댓글이 들어갑니다.
            </li>
            <li class="ListBox">
                댓글이 들어갑니다.
            </li>
            </ul>
        </div>
        <div class="box2">
            <div class="imageBox" style="background-image: url(${image});"></div>
            <div class="img"></div>
            <ul class="list">
            <li class="ListBox">타이틀 : </li>
            <li class="ListBox">코멘트 : </li>
            <li class="ListBox">desc : </li>
            <li class="ListBox">
                댓글이 들어갑니다.
            </li>
            <li class="ListBox">
                댓글이 들어갑니다.
            </li>
            </ul>
        </div>
        <div class="box2">
            <div class="imageBox" style="background-image: url(${image});"></div>
            <div class="img"></div>
            <ul class="list">
            <li class="ListBox">타이틀 : </li>
            <li class="ListBox">코멘트 : </li>
            <li class="ListBox">desc : </li>
            <li class="ListBox">
                댓글이 들어갑니다.
            </li>
            <li class="ListBox">
                댓글이 들어갑니다.
            </li>
            </ul>
        </div>


    </div>
  </body>
</html>